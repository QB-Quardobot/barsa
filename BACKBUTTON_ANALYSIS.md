# üîç –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å BackButton

## –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å —Ä–∞–±–æ—á–∏–º –∫–æ–º–º–∏—Ç–æ–º 8a7c0ea)

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #1: BackButton.show() –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```javascript
tg.BackButton.onClick(handleBackClick);
// updateBackButton() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ setTimeout(500)
```

**–†–∞–±–æ—á–∏–π –∫–æ–º–º–∏—Ç:**
```javascript
tg.BackButton.onClick(handleBackClick);
// updateBackButton() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –∏ —á–µ—Ä–µ–∑ setTimeout(500)
```

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–∑–≤–∞—Ç—å `updateBackButton()` –°–†–ê–ó–£ –ø–æ—Å–ª–µ `onClick()`, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞–¥–µ—Ä–∂–∫—É.

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #2: –û—á–∏—Å—Ç–∫–∞ sessionStorage –º–æ–∂–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```javascript
if (!isFirstPage()) {
  sessionStorage.removeItem('showLoadingScreen');
  win.history.back();
  return;
}
```

**–†–∞–±–æ—á–∏–π –∫–æ–º–º–∏—Ç:**
```javascript
if (!isFirstPage()) {
  win.history.back();
  return;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—á–∏—Å—Ç–∫–∞ `sessionStorage` –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–µ—à–∞—é—Ç `history.back()`.

**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å –æ—á–∏—Å—Ç–∫—É `sessionStorage` –∏–∑ `handleBackClick()` –∏–ª–∏ –¥–µ–ª–∞—Ç—å –µ—ë –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #3: Try-catch –±–ª–æ–∫ –º–æ–∂–µ—Ç —Å–∫—Ä—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```javascript
try {
  if (tg.BackButton) {
    // ... –≤–µ—Å—å –∫–æ–¥ BackButton
  }
} catch (e) {
  logger.warn('[TG-BackButton] Error:', e);
}
```

**–†–∞–±–æ—á–∏–π –∫–æ–º–º–∏—Ç:**
```javascript
try {
  if (tg.BackButton) {
    // ... –≤–µ—Å—å –∫–æ–¥ BackButton
  }
} catch (e) {
  // –ü—Ä–æ—Å—Ç–æ warn, –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Try-catch –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫.

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #4: –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ - BackButton —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –¥–æ tg.ready()

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```javascript
tg.ready();
tg.expand();
// ... –¥—Ä—É–≥–∏–µ –≤—ã–∑–æ–≤—ã
// BackButton.onClick() —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –ü–û–°–õ–ï –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Telegram, BackButton –¥–æ–ª–∂–µ–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ü–û–°–õ–ï `tg.ready()` –∏ `tg.expand()`, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–∞ –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É (50-100ms) –ø–æ—Å–ª–µ `tg.expand()` –ø–µ—Ä–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π BackButton.

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #5: BackButton –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –≥–æ—Ç–æ–≤ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `if (tg.BackButton)`

**–ü—Ä–æ–±–ª–µ–º–∞:** `tg.BackButton` –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å, –Ω–æ –Ω–µ –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `tg.BackButton.isVisible` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `tg.isReady`.

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #6: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ handleBackClick

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `handleBackClick` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, `onClick()` –º–æ–∂–µ—Ç –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.

**–†–µ—à–µ–Ω–∏–µ:** –û–±–µ—Ä–Ω—É—Ç—å `handleBackClick` –≤ try-catch –∏ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `onEvent('back_button_pressed')` –≤–º–µ—Å—Ç–æ `onClick()`**
   - –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è multi-page –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
   - –õ—É—á—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±—É–¥—É—â–∏–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ SDK

2. **–í—ã–∑—ã–≤–∞—Ç—å `BackButton.show()` –ü–ï–†–ï–î —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç —ç—Ç–æ—Ç –ø–æ—Ä—è–¥–æ–∫

3. **–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ü–û–°–õ–ï `tg.ready()` –∏ `tg.expand()`**
   - –ù–æ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (50-100ms) –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SDK

4. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å `tg.isReady` –ø–µ—Ä–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ SDK –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤

5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DOMContentLoaded` –∏–ª–∏ `window.load`**
   - –¢–µ–∫—É—â–∏–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `window.load` - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. ‚úÖ –í—ã–∑–≤–∞—Ç—å `updateBackButton()` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `onClick()`
2. ‚úÖ –£–±—Ä–∞—Ç—å –æ—á–∏—Å—Ç–∫—É `sessionStorage` –∏–∑ `handleBackClick()` (–∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `tg.isReady` –ø–µ—Ä–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π
4. ‚úÖ –í—ã–∑–≤–∞—Ç—å `BackButton.show()` –ü–ï–†–ï–î —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ—Å–ª–µ `tg.expand()` –ø–µ—Ä–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π BackButton
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
7. ‚ö†Ô∏è –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `onEvent('back_button_pressed')` –≤–º–µ—Å—Ç–æ `onClick()`

