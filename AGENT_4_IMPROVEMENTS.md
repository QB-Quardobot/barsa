# Agent #4 - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ best practices

## üîç –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–µ—Å—É—Ä—Å–æ–≤

–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø–æ–∏—Å–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö best practices –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤:
- ‚úÖ WCAG 2.1 AA guidelines
- ‚úÖ WAI-ARIA modal dialog patterns
- ‚úÖ Focus trap implementation best practices
- ‚úÖ Touch target size requirements (WCAG 2.5.5)

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)

### 1. –£–ª—É—á—à–µ–Ω–Ω—ã–π Focus Trap ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ edge cases

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ **Edge case: —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç** - —Ñ–æ–∫—É—Å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–º
- ‚úÖ **Edge case: –Ω–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ç–∞–±—É–ª—è—Ü–∏–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤ –º–æ–¥–∞–ª–µ
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–≤–∏–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤** - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å `display: none`, `visibility: hidden`, `opacity: 0`
- ‚úÖ **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å `tabindex="-1"`** - –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ focus trap

**–ö–æ–¥:**
```typescript
// Edge case handling
if (focusableElements.length === 0) {
  e.preventDefault();
  return;
}

if (focusableElements.length === 1) {
  e.preventDefault();
  focusableElements[0].focus();
  return;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤ –º–æ–¥–∞–ª–µ
if (!focusableElements.includes(activeElement)) {
  e.preventDefault();
  firstElement.focus();
}
```

### 2. –°–∫—Ä—ã—Ç–∏–µ —Ñ–æ–Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ—Ç screen readers ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** Screen readers –º–æ–≥–ª–∏ —á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞ –º–æ–¥–∞–ª–æ–º

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è —Ñ–æ–Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∞: `aria-hidden="true"` –Ω–∞ `#main-content` –∏ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö body
- ‚úÖ –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∞: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ `aria-hidden` –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–∫—Ä—ã—Ç—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–ö–æ–¥:**
```typescript
function hideBackgroundContent(): void {
  const mainContent = document.getElementById('main-content');
  if (mainContent) {
    mainContent.setAttribute('aria-hidden', 'true');
    hiddenElements.push(mainContent);
  }
  // ... —Å–∫—Ä—ã—Ç–∏–µ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
}

function showBackgroundContent(): void {
  hiddenElements.forEach(el => {
    el.removeAttribute('aria-hidden');
  });
  hiddenElements = [];
}
```

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è focusable —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –í focus trap –º–æ–≥–ª–∏ –ø–æ–ø–∞—Å—Ç—å –Ω–µ–≤–∏–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ `display !== 'none'`
- ‚úÖ `visibility !== 'hidden'`
- ‚úÖ `opacity !== '0'`
- ‚úÖ `!hasAttribute('aria-hidden')`
- ‚úÖ `offsetWidth > 0 && offsetHeight > 0` (—ç–ª–µ–º–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∏–¥–∏–º)

### 4. Tabindex –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –º–æ–¥–∞–ª–µ –º–æ–≥–ª–æ –ø–æ–ø–∞—Å—Ç—å –≤ focus trap

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `tabindex="-1"` –¥–ª—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–ö–æ–¥:**
```typescript
if (modalImg.tabIndex === -1 || !modalImg.hasAttribute('tabindex')) {
  modalImg.setAttribute('tabindex', '-1');
}
```

### 5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ capture phase –¥–ª—è event listener ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** Event listener –º–æ–≥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `{ capture: true }` –¥–ª—è focus trap

**–ö–æ–¥:**
```typescript
document.addEventListener('keydown', trapFocus, { capture: true });
```

## üìä –ò—Ç–æ–≥–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è focus trap
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞
- ‚úÖ ARIA –∞—Ç—Ä–∏–±—É—Ç—ã

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–π focus trap** —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤—Å–µ—Ö edge cases
- ‚úÖ **–°–∫—Ä—ã—Ç–∏–µ —Ñ–æ–Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** –æ—Ç screen readers
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–≤–∏–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤** –∏–∑ focus trap
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ tabindex** –¥–ª—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ **Capture phase** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —Å–æ–±—ã—Ç–∏–π

## üéØ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

–í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç:
- ‚úÖ **WCAG 2.1 AA** - –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ **WAI-ARIA Authoring Practices 1.2** - modal dialog pattern
- ‚úÖ **WCAG 2.4.3 Focus Order** - –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ —Ç–∞–±—É–ª—è—Ü–∏–∏
- ‚úÖ **WCAG 2.5.5 Target Size** - –º–∏–Ω–∏–º—É–º 44x44px

## üìö –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- W3C WAI-ARIA Authoring Practices Guide
- WCAG 2.1 Guidelines
- MDN Web Docs - Accessibility
- WebAIM - Web Accessibility In Mind

---

**–ò—Ç–æ–≥:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º best practices –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ edge cases –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.

